# 우동집

우리동네맛집, [**우동집**](https://udon-restaurant.vercel.app/)을 소개합니다!

## 제공하는 기능

1. 회원가입/로그인

   - 우동집 로그인 또는 소셜 로그인(구글, 깃허브) 가능

2. 지역별 맛집 분류

   - 게시글 작성 시 지역과 음식 카테고리를 설정할 수 있으며, 사이드바에서 지역을 클릭하면 해당 지역에 대한 게시글로 분류됨

3. 게시글/댓글 수정 및 삭제

   - 게시글/댓글을 작성할 뿐만 아니라 작성자가 작성한 게시글/댓글은 수정할 수 있음

4. 게시글 사진 업로드 가능

   - 최대 네 장의 사진을 업로드할 수 있으며, 중복된 사진도 올릴 수 있음
   - 게시글 수정 시 사진은 모두 다시 업로드해야 함

5. 프로필 이미지
   - 프로필 이미지를 설정할 수 있으며 게시글/댓글 작성자 정보에서 확인할 수 있음

## 역할

- 김도현 (팀장)

  - supabase Auth를 이용한 로그인/회원가입
  - 로그인 정보 기록
  - 로그인 관련 버그 수정

- 강수진

  - 댓글 추가/수정/삭제
  - 댓글 작성자 정보 띄우기
  - css

- 박민정

  - 상세페이지 게시글 정보 띄우기
  - 게시글 삭제 기능

- 유현지

  - 사이드바 지역별 카테고리 버튼 생성 및 페이지 왼쪽에 고정
  - 마이페이지 정보 보여주기 : 회원정보, 작성한 게시글
  - css

- 조해인
  - 메인페이지 : 최신글 4개 캐러셀([embla library](https://www.embla-carousel.com/get-started/)), 전체/지역별 게시글 보여주기
  - 게시글 작성/수정
  - 상세 페이지 : 좋아요 기능 추가(민정님 파일 리팩토리), 사진 캐러셀([embla library](https://www.embla-carousel.com/get-started/))
  - 메인페이지 css

## 트러블 슈팅

- 김도현
  - AuthContext Cookie 로 로그인 정보를 저장이 되지않아 코드 수정
  - 회원가입시 추가 정보 가 `['']` 형식으로 저장이 되어 의도한 동작이 되지 않아 배열`[0]` 으로 방식으로 수정
- 강수진

  - 댓글 추가, 수정, 삭제 기능

    - supabase의 API를 이용하여 댓글을 Insert 하였습니다. supabase는 처음이라 API코드를 사용해보고 오류를 고치면서 supabase와 형식이 맞지 않아 발생된 문제가 여럿 있다는 것을 알았습니다. 그 내용을 바탕으로 API를 쓰려면 supabase와 형식을 맞춰주는 게 중요하다는 사실을 깨달았습니다.
    - 코드 내에서 data가 배열로 들어오는데 그걸 확인하지 않고 바로 써서 필요한 객체가 제대로 지정되지 않는 문제가 있었습니다. 코드에 있는 요소들을 전부 console로 찍어봐서 data가 배열로 들어와있음을 알고 해결했습니다. data가 잘 들어오는지, 어떤 형식으로 들어오는지 계속 console로 확인하는 습관을 들이는 계기가 되었습니다.

  - 댓글에 프로필 사진 뜨게 하는 기능
    - 프로필 사진을 뜨게 하는 방법을 잘 몰라 검색 등 혼자 너무 많은 시간을 붙잡고 있다가 뒤늦게 튜터님한테 가서 멘토링을 받았습니다. 혼자 해결하려고 하는 것은 좋지만 마감 시간이 많이 남지 않은 상태에서는 너무 오래 잡고 있는게 능사가 아니라는 점을 깨달았습니다.
    - 프로필 사진 코드를 작성하는 중 console에는 오류가 안 뜨는데 프로필 사진이 바로 뜨지 않고 새로고침해야 뜨는 오류가 있었습니다. 튜터님이랑 한참을 오류를 찾다가 문제가 되는 것 같은 부분 전부 console을 찍어 보고 문제를 해결했습니다.

- 박민정

  - 상세페이지 구현을 위해 해당 포스트 정보를 불러옴에 있어, 어떤 형식으로 데이터가 오는지 확인 하지 않고, 임의로 객체로 설정하여 문제가 생김. 하지만 배열로 왔고, 배열안에 하나의 객체가 옴에 있어 배열[0]을 구조분해할당 후 객체에 접근하고 key에 접근하여 데이터를 불러옴

  - 프로필 이미지 불러오기

    - 프로필 이미지를 불러 올 때 처음에 불러왔던 targetPost data에 엮어서 들고오려 했는데, 오류가 남. 이렇게 하기 위해서는 `useEffect`를 활용하는 과정에서 post정보를 먼저 받아 온 후 post정보에서 user 정보를 받아와서 userProfile을 가져오기 위해서는 먼저 post 정볼를 받아 온 후 가능함. 하여 useEffect 부분을 `useEffect(()=>{},[post])`로 수정

  - 따로 만들어둔 게시글삭제 DeletePost 컴포넌트를 상세페이지에서 활용
    - 상세페이지에서 DeletePost 컴포넌트를 활용하기 위해 컴포넌트를 불러 온 후 상세페이지에서 post.PostID를 '인자'로 넘겨 주어야 했음. 그럼 DeletePost가 인자로 받고 table에서 인자와 같은 것을 찾아서 삭제하도록 구현함

- 유현지

  - 현재 유저 id와 게시글 유저 id를 비교하면서 가져오는 것이 감이 잡히질 않았으나, getSession과 eq를 통해 필터링 하면서 가져올 수 있었습니다.
  - css를 수정하면서 다른 분들의 코드를 보며 어떤 식으로 동작하는지 볼 수 있어서 좋았던 것 같습니다.

- 조해인

  - 사진 업로드 시 파일 이름이 중복되면 duplicate 오류가 발생해, 업로드한 사진 이름을 `${postID}_${idx}`로 설정. storage에서 삭제하고 불러오기 용이하도록 게시글마다 하위 폴더를 만들어 저장함.

  - 게시글 수정 시 불러온 파일을 다시 보여주는 것이 어려워, 수정 시 해당 게시글에 대한 사진 전부 삭제 및 재업로드함. (수정 시 사진 재업로드 요청 문구를 보여줌.)

  - 게시글 수정 시 사진 저장이 안되는 오류 해결 (merge하는 과정에서 삭제된 듯)

  - 상세페이지에 좋아요 구현 시 리렌더링이 많이 일어나는 오류 발생. 해당 파일을 리팩토리하고, `useEffect`의 dependency array에 `like` 변수를 넣어 좋아요를 누르면 리렌더링되도록하여 좋아요 개수가 변하는 것을 보여줌.

  - 좋아요 구현 시 한 사용자가 한번만 누를 수 있도록 함. 게시글 정보에 좋아요를 누른 사용자의 ID 배열을 저장해 좋아요 취소가 가능하도록 함.

  - 사이드바를 버튼을 누르면 리렌더링되지 않는 오류 해결. `useEffect`의 dependency array에 `location` 정보를 넣어 querystring이 바뀔 때 리렌더링되도록 함.

  ## 한 줄 소감

  - 김도현 : 많은 힘든일이 있었지만 프로젝트가 생각외로 완성도 있게 나와서 너무 좋았습니다. 다 팀원분들 덕분입니다.

  - 강수진 : 좋은 팀원들 만나 빠르고 우수하게 팀 과제를 해결할 수 있어 너무 좋았습니다!! 잘 하시는 팀원들이 많아 도움도 많이 받고 나도 저렇게 되고 싶다는 자극도 많이 받았습니다 감사했습니다!

  - 박민정 : 협업에 있어 많은 것을 배울 수 있었던 유익한 시간이었습니다. 팀원분들께 감사드립니다.

  - 유현지 : 진도가 늦춰져서 따라갈 수 있을까 걱정이 많이 됐지만, 팀원분들이 도와주시고... 알려주시고 ...피드백을 주셔서 잘 따라갈 수 있었던 것 같습니다.

  - 조해인 : 우당탕탕이었지만 모두 맡은 일을 잘해주셔서 기한 안에 끝낼 수 있었던 것 같습니다.
